
<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>

    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.7/dist/css/bootstrap.min.css" rel="stylesheet"
        integrity="sha384-LN+7fdVzj6u52u30Kp6M/trliBMCMKTyK833zpbD+pXdCLuTusPj697FH4R/5mcr" crossorigin="anonymous">
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.7/dist/js/bootstrap.bundle.min.js"
        integrity="sha384-ndDqU0Gzau9qJ1lfW4pNLlhNTkCfHzAVBReH9diLvGRem5+R9g2FzA8ZGN954O5Q"
        crossorigin="anonymous"></script>

    <script src="https://code.jquery.com/jquery-3.7.1.min.js"
        integrity="sha256-/JqT3SQfawRcv/BIHPThkBvs0OEvtFFmqPF/lYI/Cxo=" crossorigin="anonymous"></script>

    <script src="https://cdn.jsdelivr.net/npm/@popperjs/core@2.11.8/dist/umd/popper.min.js"
        integrity="sha384-I7E8VVD/ismYTF4hNIPjVp/Zjvgyol6VFvRkX/vR+Vc4jQkC+hVqc2pM8ODewa9r"
        crossorigin="anonymous"></script>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.7/dist/js/bootstrap.min.js"
        integrity="sha384-7qAoOXltbVP82dhxHAUje59V5r2YsVfBafyUDxEdApLPmcdhBPg1DKg1ERo0BZlK"
        crossorigin="anonymous"></script>

    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.7.2/css/all.min.css">


    <style>

        .dashboard-navbar {
    background-color: #343a40; /* Dark background */
    color: white;
    padding: 0.75rem 2rem;
    box-shadow: 0 2px 4px rgba(0,0,0,0.1);
    margin-bottom: 2rem; /* Adds space between navbar and form */
}

.navbar-brand {
    font-weight: 600;
    font-size: 1.5rem;
    color: white !important;
}

.navbar-brand img {
    height: 40px;
    margin-right: 10px;
}

.welcome-text {
    font-size: 1rem;
}
        body {
            background-color: #f3f3f3;
        }

        .form-control {
            border: 1px solid black;
            border-radius: 2px;
        }

        form input.form-control,
        form select.form-select,
        form textarea.form-control {
            border: 1px solid #ccc;
            border-radius: 6px;
        }

        form input.form-control:focus,
        form select.form-select:focus,
        form textarea.form-control:focus {
            border-color: #5b86e5;
            box-shadow: 0 0 6px rgba(91, 134, 229, 0.4);
            background-color: #fff;
            color: #111;
            outline: none;
        }

        form label {
            color: #f2f2f2;
            font-weight: 500;
        }
    </style>


    <script>
        $(document).ready(function(){
            $("#emailid").blur(function () {
                let email = $(this).val().trim();
                let regex = /^[\w-\.]+@([\w-]+\.)+[\w-]{2,4}$/;
                if (email === "") {
                    alert("fill Email Id");

                }
                else if (regex.test(email) == false) {
                    alert("Invalid Email Id");

                }
            })

             $("#pub_evnt").click(function () {
                         let obj = {
                        type: "post",
                        url: "/Post_event",
                        data: {
                            emailid: $("#emailid").val(),
                            eventname: $("#eventname").val(),
                            date: $("#date").val(),
                            Address: $("#Address").val(),
                            time: $("#time").val(),
                            inputState: $("#inputState").val(),
                            Category: $("#Category").val(),
                            minage: $("#minage").val(),
                            contact: $("#contact").val(),
                            maxage:$("#maxage").val(),
                            lastDate:$("#lastDate").val(),
                            fee:$("#fee").val(),
                            pMny:$("#pMny").val(),
                            otherinfo:$("#otherinfo").val(),


                        }
                    }
                    $.ajax(obj).then(function (response) {
                        alert(response);
                    }).fail(function (err) {
                        alert(err);
                    })
                })
        })
    </script>


<script>
    document.addEventListener("DOMContentLoaded", function() {
        const userEmail = localStorage.getItem('loggedInUserEmail');
        if (userEmail) {
            // This will put the email in the new navbar
            document.getElementById('welcomeEmail').textContent = userEmail;
        } else {
            document.getElementById('welcomeEmail').textContent = "Guest";
        }
    });
</script>

</head>

<body>

    <nav class="navbar dashboard-navbar">
    <div class="container-fluid">
        <a class="navbar-brand" href="#">
            <img src="/pics/Pulsepoint5.jpg" alt="PulsePoint Logo">
            PulsePoint
        </a>
        <span class="navbar-text welcome-text">
            Welcome: <span id="welcomeEmail"></span>
        </span>
    </div>
</nav>

    <div class="container mx-auto" style="width: 70%;">

        <form class="row g-3 m-2 p-3 needs-validation border-top-0 rounded-bottom shadow-sm"
            enctype="multipart/form-data" style=" background: linear-gradient(to bottom right,#E58E73, #2c3e50);
            color: white;
            border-radius: 12px; ">

            <div class="col-12 text-center mb-3">
                <h4 style="
                font-weight: 600;
                letter-spacing: 0.8px;
                margin-bottom: 0;">
                    Tournament Details
                </h4>
                <hr style="width: 50px; border-top: 2px solid white; margin: 8px auto 0;">
            </div>

            <input type="hidden" id="hdn" name="hdn">

            <!-- <div class=" col-10 md-3">
                <label for="inputEmail4" class="form-label">Email:</label>
                <input type="email" class="form-control" id="emailid" name="emailid" required>

            </div>
            <div class=" col-2 mt-5">
                <button type="button" class="btn btn-dark" id="search">search</button>
            </div> -->

            <div class="col-12 mb-3">
    <!-- This container keeps the label and button together -->
    <div class="d-flex align-items-center mb-1"> 
        <label for="emailid" class="form-label mb-0">Email:</label>
        <!-- The "ms-2" adds a small space between the text and the button -->
        <button type="button" class="btn btn-dark btn-sm ms-2" id="search">Search</button>
    </div>
    <input type="email" class="form-control" id="emailid" name="emailid" required>
</div>
            <br>
            <div class=" col-8 md-3">
                <label class="form-label">Event Name:</label>
                <input type="text" class="form-control" id="eventname" name="eventname" required>

            </div>
            <br>
            <div class=" col-4 md-3">
                <label class="form-label">Date:</label>
                <input type="date" class="form-control" id="date" name="date" required>

            </div>

            <div class="col-md-6">
                <label class="form-label">Time:</label>
                <input type="time" class="form-control" id="time" name="time" placeholder="" required>

            </div>

            <div class="col-md-6">
                <label class="form-label">Venue/Address:</label>
                <input type="text" class="form-control" id="Address" name="Address" required>

            </div>
            <div class="col-md-4">
                <label for="inputState" class="form-label">State:</label>
                <select id="inputState" class="form-select">
                    <option selected>Choose...</option>
                    <option>PUNJAB</option>
                    <option>RAJASTHAN</option>
                    <option>HIMACHAL</option>

                </select>
            </div>

            <div class="col-md-4">
                <label for="inputState" class="form-label">Sports Category:</label>
                <select id="Category" class="form-select">
                    <option selected>Choose...</option>
                    <option>Football</option>
                    <option>Cricket</option>
                    <option>Squash</option>

                </select>
            </div>

            <div class="col-md-2">
                <label class="form-label">Min Age:</label>
                <input type="number" class="form-control" id="minage">
            </div>

            <div class="col-md-2">
                <label class="form-label">Max Age:</label>
                <input type="number" class="form-control" id="maxage">
            </div>


            <div class="col-md-6">
                <label class="form-label">Last Date of Registration:</label>
                <input type="date" class="form-control" id="lastDate" name="lastDate" placeholder="" required>

            </div>




            <div class=" col-6 md-3 p-1">
                <label class="form-label">Contact No.</label>
                <input type="number" class="form-control" id="contact" name="contact" required>

            </div>

            <div class=" col-8 md-3">
                <label class="form-label">Fee:</label>
                <input type="text" class="form-control" id="fee" name="fee" required>

            </div>

            <div class=" col-8 md-3">
                <label class="form-label">Prize Money:</label>
                <input type="text" class="form-control" id="pMny" name="pMny" required>

            </div>


          


           

            <div class="row p-1">
                <div class="col-md-12">
                    <label for="otherinfo" class="form-label">Other Info:</label>
                    <textarea class="form-control" id="otherinfo" rows="6" name="otherinfo"></textarea>
                </div>
            </div>


            

            <div class="col-12">
                <button type="button" class="btn btn-dark" id="pub_evnt" name="pub_evnt">Publish Event</button>

            </div>

        </form>
    </div>

</body>

</html>

<!-- <!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Post a New Tournament</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">
    <style>
        body { background-color: #f8f9fa; }
        .form-container {
            max-width: 800px;
            margin: 50px auto;
            padding: 30px;
            background: white;
            border-radius: 8px;
            box-shadow: 0 4px 8px rgba(0,0,0,0.1);
        }
    </style>
</head>
<body>

<div class="form-container">
    <h2 class="text-center mb-4">Create a New Event</h2>
    <form id="postEventForm">
        <div class="row">
            <div class="col-12 mb-3">
                <label for="emailid" class="form-label">Organizer Email</label>
                <input type="email" class="form-control" id="emailid" name="emailid" readonly>
            </div>

            <div class="col-md-6 mb-3">
                <label for="eventname" class="form-label">Event Name</label>
                <input type="text" class="form-control" id="eventname" name="eventname" required>
            </div>
            <div class="col-md-6 mb-3">
                <label for="date" class="form-label">Date of Event</label>
                <input type="date" class="form-control" id="date" name="date" required>
            </div>
            <div class="col-md-6 mb-3">
                <label for="time" class="form-label">Time</label>
                <input type="time" class="form-control" id="time" name="toe" required>
            </div>
            <div class="col-md-6 mb-3">
                <label for="Address" class="form-label">Venue/Address</label>
                <input type="text" class="form-control" id="Address" name="Address" required>
            </div>

            <div class="col-md-6 mb-3">
                <label for="inputState" class="form-label">State</label>
                <input type="text" class="form-control" id="inputState" name="inputState" required>
            </div>
            <div class="col-md-6 mb-3">
                <label for="Category" class="form-label">Sports Category</label>
                <input type="text" class="form-control" id="Category" name="Category" required>
            </div>

            <div class="col-md-3 mb-3">
                <label for="minage" class="form-label">Min Age</label>
                <input type="number" class="form-control" id="minage" name="minage" required>
            </div>
            <div class="col-md-3 mb-3">
                <label for="maxage" class="form-label">Max Age</label>
                <input type="number" class="form-control" id="maxage" name="maxage" required>
            </div>
            <div class="col-md-6 mb-3">
                <label for="lastDate" class="form-label">Last Date of Registration</label>
                <input type="date" class="form-control" id="lastDate" name="lastDate" required>
            </div>
            
            <div class="col-md-6 mb-3">
                <label for="contact" class="form-label">Contact No.</label>
                <input type="text" class="form-control" id="contact" name="contact" required>
            </div>
            <div class="col-md-3 mb-3">
                <label for="fee" class="form-label">Fee</label>
                <input type="number" class="form-control" id="fee" name="fee" required>
            </div>
            <div class="col-md-3 mb-3">
                <label for="pMny" class="form-label">Prize Money</label>
                <input type="number" class="form-control" id="pMny" name="pMny">
            </div>

            <div class="col-12 mb-3">
                <label for="otherinfo" class="form-label">Other Info</label>
                <textarea class="form-control" id="otherinfo" name="otherinfo" rows="3"></textarea>
            </div>

            <div class="col-12 text-center">
                <button type="submit" class="btn btn-primary btn-lg">Publish Event</button>
            </div>
        </div>
    </form>
</div>

<script>
    // Set the organizer's email automatically when the page loads
    // This assumes you save the organizer's email to localStorage upon login
    // e.g., localStorage.setItem('loggedInUserEmail', 'organizer@example.com');
    document.addEventListener("DOMContentLoaded", function() {
        const organizerEmail = localStorage.getItem('loggedInUserEmail');
        if (organizerEmail) {
            document.getElementById('emailid').value = organizerEmail;
        } else {
            alert("Organizer email not found. Please log in again.");
        }
    });

    // Handle form submission
    document.getElementById('postEventForm').addEventListener('submit', function(event) {
        event.preventDefault(); // Prevent default form submission

        const formData = new FormData(this);
        const data = Object.fromEntries(formData.entries());

        fetch('/Post_event', {
            method: 'POST',
            headers: {
                'Content-Type': 'application/json',
            },
            body: JSON.stringify(data),
        })
        .then(response => response.text())
        .then(result => {
            alert(result); // Show the server's response (e.g., "published successfully")
            if (result.includes("successfully")) {
                this.reset(); // Clear the form
            }
        })
        .catch(error => {
            console.error('Error:', error);
            alert('An error occurred while posting the event.');
        });
    });
</script>
</body>
</html> -->